<!DOCTYPE html>
<html>
<!-- Import necessary libraries from Google APIs, PyScript website -->
<head>
  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>

<!-- Style adjustments -->
<style> 
    body {
    	font-family: 'Montserrat';
    	font-size: 20px;
    	text-align: center;
    	font-weight: bold;
  	}
    
    .container {
      text-align: center;
    }
    .btn {
    	display: inline-block;
    	font-size: 22px;
      padding: 0.5em 1em;
      text-align: center;
      background: white;
      left: 50%;
    }
    
    .btn:hover {
    	background: #a639e6;
      color: white;
      transition: .5s ease-out;
    }

    .pca:hover {
      background: #18de50;
    }
    
    .upload:hover {
      background: #029909;
    }
    .choose:hover {
      background: white;
      color: black;
    }
    
</style>
<body>

<!-- Only accept HDF5 file types -->
<label for="myH5File">
  Upload an H5 file here!
</label>
<form id="uploadbanner" enctype="multipart/form-data" method="post">
  <input type="file" class="btn choose" accept=".h5" id="myH5File">
  <button id="upload button" class="btn upload">Upload</button>
</form>
<br><br>
<div class="container">
  <h3> Please choose a dimensionality reduction method: </h3>
  <button id="pca button" class="btn pca" py-onClick ="PCA">PCA</button>
  <button id="tsne button" class="btn" py-onClick ="tsne">T-SNE</button>
</div>
<!-- basically import packages-->
<py-config style="color: white;">
  packages = ["scikit-learn", "plotly", "pandas", "anndata", "disable_warnings"]
</py-config>
<py-script>
from js import document 
from pyodide.ffi import create_proxy
import pandas as pd
import plotly.io as pio
import plotly.express as px
from sklearn.cluster import KMeans
from sklearn.manifold import TSNE
from sklearn.preprocessing import StandardScaler
from sklearn.decomposition import PCA
import anndata as ad

def processFile(self):
  filename = document.getElementById('myH5File').value;
  print(filename)
  print("you clicked me")

function_proxy = create_proxy(processFile)

document.getElementById("upload button").addEventListener("click", function_proxy)
</py-script>
<div id="output"></div>
</html>
